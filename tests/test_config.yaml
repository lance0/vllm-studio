# CRITICAL
# Test Configuration for Model Validation Harness
# This file defines parameters, thresholds, and test behavior for model validation

# Timeout settings (in seconds)
timeouts:
  # Maximum time to wait for health check response
  health_check: 10

  # Maximum time to wait for short generation completion
  short_generation: 30

  # Maximum time to wait for long context test completion
  long_context: 300

  # Maximum time to wait for model restart (evict + launch + ready)
  restart: 600

# Pass/fail thresholds
thresholds:
  # Minimum number of tokens to generate in short generation test
  short_generation_tokens: 32

  # Maximum acceptable latency for short generation (milliseconds)
  short_generation_max_latency_ms: 5000

  # Target context fill ratio for long context test (0.0-1.0)
  # 0.9 = 90% of max_model_len
  long_context_target_ratio: 0.9

  # Minimum acceptable VRAM headroom (percentage)
  # If gpu_memory_utilization is 0.9, we want at least 5% free
  memory_headroom_min_percent: 5

# Test parameters
test_params:
  # Prompt for short generation test
  short_generation_prompt: "Explain quantum computing in one sentence."

  # Maximum tokens to generate in short generation test
  short_generation_max_tokens: 128

  # Path to base prompt for long context test
  # This prompt will be repeated to fill the context window
  long_context_base_prompt_path: "tests/long_context_prompt.txt"

# Model-specific test configurations
# Override default settings for specific models
model_configs:
  # Example: stricter requirements for production models
  production-model:
    thresholds:
      short_generation_max_latency_ms: 3000
      long_context_target_ratio: 0.95

  # Example: relaxed requirements for experimental models
  experimental-model:
    thresholds:
      short_generation_max_latency_ms: 10000
      long_context_target_ratio: 0.7
    timeouts:
      long_context: 600

# Test suite selection
# Define which tests to run for different scenarios
test_suites:
  # Quick validation - basic health and generation
  quick:
    - health_check
    - short_generation

  # Standard validation - all tests except restart
  standard:
    - health_check
    - short_generation
    - long_context
    - memory_headroom

  # Full validation - all tests including restart
  full:
    - health_check
    - short_generation
    - long_context
    - memory_headroom
    - restart_validation

# Reporting settings
reporting:
  # Directory to save test results
  output_dir: "artifacts/tests/results"

  # Include detailed error traces in output
  verbose_errors: true

  # Save individual test artifacts (prompts, responses)
  save_artifacts: false
